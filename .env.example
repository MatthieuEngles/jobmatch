# =============================================================================
# JobMatch - Configuration Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values
# =============================================================================

# -----------------------------------------------------------------------------
# PostgreSQL Database
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://jobmatch:jobmatch@db:5432/jobmatch
POSTGRES_USER=jobmatch
POSTGRES_PASSWORD=jobmatch
POSTGRES_DB=jobmatch
POSTGRES_HOST=db
POSTGRES_PORT=5432

# -----------------------------------------------------------------------------
# Redis Cache
# -----------------------------------------------------------------------------
REDIS_URL=redis://redis:6379

# -----------------------------------------------------------------------------
# Application Mode
# -----------------------------------------------------------------------------
ENV_MODE=dev
DEBUG=true
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# Exposed Ports (host:container mapping)
# -----------------------------------------------------------------------------
GUI_PORT=8085
CV_INGESTION_PORT=8081
OFFRE_INGESTION_PORT=8082
MATCHING_PORT=8086
AI_ASSISTANT_PORT=8084
DB_PORT=5433
REDIS_PORT=6379
OLLAMA_PORT=11434

# -----------------------------------------------------------------------------
# Microservices URLs (internal Docker network)
# -----------------------------------------------------------------------------
CV_INGESTION_URL=http://cv-ingestion:8081
OFFRE_INGESTION_URL=http://offre-ingestion:8082
MATCHING_URL=http://matching:8086
MATCHING_SERVICE_URL=http://matching:8086
AI_ASSISTANT_URL=http://ai-assistant:8084

# -----------------------------------------------------------------------------
# GUI Service - Data Sources
# -----------------------------------------------------------------------------
# Set to "false" to use BigQuery instead of SQLite
USE_SQLITE_OFFERS=true
# Set to "true" to use mock data for matching (testing only)
USE_MOCK_MATCHING=false

# -----------------------------------------------------------------------------
# Matching Service
# -----------------------------------------------------------------------------
# Path to the job offers SQLite database (with embeddings)
JOB_OFFERS_DB_PATH=/app/matching/data/job_offers_gold.db

# -----------------------------------------------------------------------------
# France Travail API (for offre-ingestion)
# -----------------------------------------------------------------------------
FRANCE_TRAVAIL_API_KEY=your_api_key_here

# -----------------------------------------------------------------------------
# LLM Configuration (for cv-ingestion and ai-assistant)
# -----------------------------------------------------------------------------
# Provider: openai, anthropic, ollama, openai_compatible
LLM_TYPE=openai
LLM_ENDPOINT=https://api.openai.com/v1
LLM_API_KEY=sk-your-api-key-here
LLM_MODEL=gpt-4o-mini
LLM_MAX_TOKENS=2048

# -----------------------------------------------------------------------------
# GCP / BigQuery Configuration (Production)
# -----------------------------------------------------------------------------
# Required when USE_SQLITE_OFFERS=false
GCP_PROJECT_ID=job-match-v0
BIGQUERY_SILVER_DATASET=jobmatch_silver
BIGQUERY_GOLD_DATASET=jobmatch_gold
# Authentication: We use Workload Identity Federation (GitHub Actions) or
# Application Default Credentials (local: gcloud auth application-default login,
# GCP VM: automatic via attached Service Account). No JSON key file needed.
# GOOGLE_APPLICATION_CREDENTIALS is only needed if you want to force a specific
# JSON key file (not recommended). See infra/docs/GCP_IAM_GUIDE.md for details.
# GOOGLE_APPLICATION_CREDENTIALS=/app/credentials/gcp-sa.json

# -----------------------------------------------------------------------------
# Embeddings Configuration
# -----------------------------------------------------------------------------
EMBEDDINGS_PROVIDER=sentence_transformers
EMBEDDINGS_MODEL=all-MiniLM-L6-v2
