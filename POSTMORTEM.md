# Postmortem - JobMatch

## üìÖ Sessions

### 2025-12-22 (4) - Refonte UI Landing Page et Profil
**Contexte:** Am√©liorer l'interface utilisateur de la landing page et de la page profil

**R√©alisations:**
- Landing page dynamique avec animations CSS (fadeInUp, float, pulse, slideIn)
- Hero section plein √©cran (100vh) sans scroll
- Navbar conditionnelle : masqu√©e si d√©connect√©, visible si connect√©
- Cartes de "match preview" anim√©es dans le hero
- Stats anim√©es avec gradient (10K+ offres, 95% pr√©cision, 30s pour matcher)
- Page profil avec sidebar menu (photo, donn√©es perso, CVs, LM, pitch, succ√®s, hobbies)
- Site non-scrollable (overflow: hidden sur body)
- Ajustement it√©ratif des tailles pour tenir dans le viewport

**Probl√®mes rencontr√©s:**
- Migration Django manquante ‚Üí `makemigrations accounts` pour cr√©er 0001_initial.py
- Lignes trop longues dans migration (flake8 E501) ‚Üí split help_text avec parenth√®ses
- Django 5+ logout n√©cessite POST ‚Üí form avec csrf_token au lieu de lien

**D√©cisions techniques:**
- **CSS-only animations** : pas de JS pour les animations, tout en CSS
- **Template blocks conditionnels** : `{% block navbar %}` avec `{{ block.super }}` pour h√©ritage s√©lectif
- **`{% block main_attrs %}`** : permet de customiser les attributs de `<main>` par template
- **clamp() pour responsive** : `font-size: clamp(2.8rem, 5.5vw, 4rem)` adapte la taille au viewport

---

### 2025-12-22 (3) - Configuration multi-environnement
**Contexte:** Permettre au service GUI de tourner en local, Docker dev et Cloud Run prod

**R√©alisations:**
- Settings Django avec `ENV_MODE` (local/dev/prod)
- Mode local : `run_local.sh` avec SQLite
- Mode Docker dev : `docker-compose.dev.yml` avec PostgreSQL + hot-reload
- Mode Docker prod : `Dockerfile.prod` multi-stage optimis√©
- CI/CD GCloud : `cloudbuild.yaml` pour Cloud Run
- Support Cloud SQL via Unix socket
- Support Cloud Storage pour les uploads (media)
- WhiteNoise pour les fichiers statiques
- README.md avec documentation des 3 modes

**D√©cisions techniques:**
- **Cloud Run** (serverless) plut√¥t que GKE (Kubernetes) pour simplifier
- **Cloud SQL PostgreSQL** pour la prod
- **Cloud Storage** pour les uploads CV
- **Multi-stage build** pour image prod l√©g√®re
- **WhiteNoise** pour servir les static files sans nginx

---

### 2025-12-22 (2) - Service GUI Django
**Contexte:** Impl√©mentation du service GUI avec Django

**R√©alisations:**
- Choix framework : Django (malgr√© architecture microservices, pour batteries incluses)
- Cr√©ation projet Django dans `app/gui/`
- App `accounts` avec custom User model :
  - Inscription, connexion, d√©connexion
  - Profil utilisateur (pr√©f√©rences emploi : salaire, disponibilit√©, remote)
  - Suppression compte (RGPD)
- Templates Bootstrap 5 (base.html, home, login, register, profile)
- Configuration PostgreSQL via variables d'environnement
- Dockerfile pour le service GUI
- User Stories POC couvertes : US001, US002, US005, US006, US007, US008

**D√©cisions techniques:**
- **Django vs FastAPI** : Django choisi pour auth int√©gr√©e et admin
- **Custom User Model** : email comme USERNAME_FIELD
- **Bootstrap 5 via CDN** : rapidit√© de d√©veloppement pour POC

---

### 2025-12-22 (1) - Initialisation projet + Architecture microservices
**Contexte:** D√©marrage du projet JobMatch - plateforme de matching CV/offres d'emploi

**R√©alisations:**
- Lecture et analyse des documents de contexte (One liner.pdf, Job match.xlsx)
- Compr√©hension de la vision produit (V1 MVP ‚Üí V2 avec personnalisation CV)
- Identification de l'√©quipe (Matthieu, Cl√©ment, Mohamed, Maxime)
- Cr√©ation du fichier POSTMORTEM.md et PITCH.md
- Mise en place architecture microservices :
  - `app/gui` - Interface utilisateur
  - `app/cv-ingestion` - Import et parsing CV
  - `app/offre-ingestion` - R√©cup√©ration offres (France Travail)
  - `app/matching` - Algorithme de matching
  - `shared/` - Code partag√© (interfaces, constants, utils)
- Configuration CI/CD :
  - `.pre-commit-config.yaml` (black, isort, flake8, mypy, bandit, gitleaks)
  - `.github/workflows/ci.yml` (tests par service)
  - `.github/workflows/cd.yml` (build Docker + deploy)
- `docker-compose.yml` avec postgres + redis
- Gestion Git : branche `dev` cr√©√©e, `DEV_POC` merg√©e et supprim√©e

**Probl√®mes rencontr√©s:**
- Fichier Excel non lisible directement ‚Üí r√©solu avec pandas + openpyxl
- Pre-commit `types-all` incompatible Python 3.12 ‚Üí retir√© de mypy config
- Hook `no-commit-to-branch` bloquait merge sur dev ‚Üí retir√© dev des branches prot√©g√©es

**D√©cisions techniques:**
- **Mode vibecoding + √©quipe classique** : configuration dans `.claude/settings.json`
- **Pr√©fixe commits** : `[CortexForge]` (pas de footer "Generated by Claude Code")
- **P√©rim√®tre Matthieu** : gui, cv-ingestion, frontend, shared/utils
- **Zones interdites** : offre-ingestion, matching (√©quipe classique)
- **Branches prot√©g√©es** : main uniquement (dev autoris√© pour permettre les merges)

## üß† Apprentissages cl√©s
- Le projet a deux versions : V1 (matching simple) et V2 (matching + personnalisation CV)
- POC structur√© en 4 domaines : Gestion Compte (DE:0), Import CV (DE:1), Ingestion Offres (DE:2), Smart Match (DE:2)
- Priorit√©s MoSCoW d√©finies dans les User Stories
- Mode vibecoding en √©quipe n√©cessite un p√©rim√®tre clair et des r√®gles strictes
- Django 5+ : logout doit √™tre en POST (plus de GET)
- Template blocks Django : `{{ block.super }}` pour h√©riter conditionnellement

## ‚ö†Ô∏è Pi√®ges √† √©viter
- Ne pas oublier la conformit√© RGPD (t√¢che assign√©e √† Maxime)
- Gentleman Agreement √† signer avant de continuer
- **Vibecoding** : ne jamais modifier les zones de l'√©quipe classique (offre-ingestion, matching)
- Toujours confirmer avant de modifier fichiers partag√©s (docker-compose, .env, interfaces)
- **Migrations auto-g√©n√©r√©es** : peuvent avoir des lignes trop longues (flake8 E501), n√©cessite reformatage manuel
- **overflow: hidden** sur body emp√™che tout scroll, s'assurer que le contenu tient dans le viewport

## üèóÔ∏è Patterns qui fonctionnent
- Documentation structur√©e dans Google Drive
- User Stories avec priorit√©s MoSCoW et crit√®res d'acceptation
- R√©partition des t√¢ches selon les pr√©f√©rences/comp√©tences
- `.claude/settings.json` pour d√©finir les r√®gles de vibecoding
- Pr√©fixe de commit `[CortexForge]` pour identifier les commits vibecoding
- Architecture microservices avec dossiers s√©par√©s par domaine
- **CSS clamp()** pour des tailles responsive sans media queries
- **Template blocks conditionnels** avec `{% if user.is_authenticated %}{{ block.super }}{% endif %}`
- **Variables CSS** (`:root`) pour coh√©rence des couleurs/styles

## üìã TODO / Dette technique
- [x] Choix de la stack technique ‚Üí architecture microservices Python
- [x] Cr√©er branche feature et commit structure microservices
- [x] Documentation pre-commit (docs/pre_commit_101.md)
- [x] Service GUI Django (accounts app)
- [x] Dockerfile GUI
- [x] Configuration multi-environnement (local/dev/prod)
- [x] CI/CD Cloud Run (cloudbuild.yaml)
- [x] Refonte UI landing page (hero, animations, navbar conditionnelle)
- [x] Page profil avec sidebar menu
- [ ] Gentleman Agreement √† r√©diger et signer
- [ ] Pr√©sentation GitHub √† faire (Matthieu)
- [ ] √âtat de l'art scientifique (donn√©es, algos, SaaS existants, limites)
- [ ] Se renseigner sur la RGPD (Maxime)
- [ ] Tester `run_local.sh`
- [ ] Tester `docker-compose.dev.yml`
- [ ] Cr√©er projet GCloud + Cloud SQL + Cloud Storage
- [ ] D√©finir les interfaces partag√©es (schemas CV, offres)
- [ ] Int√©grer l'upload de CV dans la GUI
- [ ] Impl√©menter les sections du profil (CVs, LM, pitch, succ√®s, hobbies)
- [ ] Upload photo de profil
